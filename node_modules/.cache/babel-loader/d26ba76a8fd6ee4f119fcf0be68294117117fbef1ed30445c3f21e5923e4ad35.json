{"ast":null,"code":"var _jsxFileName = \"D:\\\\FE\\\\AI\\\\ai-chat-app\\\\src\\\\components\\\\MainContent.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport rehypeRaw from \"rehype-raw\";\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\nimport { oneDark } from \"react-syntax-highlighter/dist/esm/styles/prism\";\nimport \"./MainContent.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COHERE_API_KEY = process.env.REACT_APP_COHERE_API_KEY; // <-- Đảm bảo dòng này đúng\nconst COHERE_CHAT_API_URL = \"https://api.cohere.com/v1/chat\";\nconst MainContent = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"main-content\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-body\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-message-list\",\n        children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message-wrapper ${msg.sender}`,\n          children: [msg.sender === \"ai\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-avatar ai-avatar\",\n            children: \"AI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 39\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message-bubble ${msg.sender}`,\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              remarkPlugins: [remarkGfm],\n              rehypePlugins: [rehypeRaw],\n              components: {\n                a: ({\n                  node,\n                  ...props\n                }) => /*#__PURE__*/_jsxDEV(\"a\", {\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  ...props\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 41,\n                  columnNumber: 23\n                }, this),\n                code({\n                  node,\n                  inline,\n                  className,\n                  children,\n                  ...props\n                }) {\n                  const match = /language-(\\w+)/.exec(className || \"\");\n                  return !inline && match ? /*#__PURE__*/_jsxDEV(SyntaxHighlighter, {\n                    children: String(children).replace(/\\n$/, \"\"),\n                    style: oneDark,\n                    language: match[1],\n                    PreTag: \"div\",\n                    ...props\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 46,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"code\", {\n                    className: className,\n                    ...props,\n                    children: children\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 54,\n                    columnNumber: 25\n                  }, this);\n                }\n              },\n              children: [msg.text, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 36,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 15\n          }, this), msg.sender === \"user\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-avatar user-avatar\",\n            children: \"B\\u1EA1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 5\n  }, this);\n};\n_s(MainContent, \"qedD04X8eWe64U0zt6yPEFjXzT8=\");\n_c = MainContent;\nexport default MainContent;\nvar _c;\n$RefreshReg$(_c, \"MainContent\");","map":{"version":3,"names":["React","useState","useRef","useEffect","ReactMarkdown","remarkGfm","rehypeRaw","Prism","SyntaxHighlighter","oneDark","jsxDEV","_jsxDEV","COHERE_API_KEY","process","env","REACT_APP_COHERE_API_KEY","COHERE_CHAT_API_URL","MainContent","_s","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","messagesEndRef","className","children","map","msg","index","sender","fileName","_jsxFileName","lineNumber","columnNumber","remarkPlugins","rehypePlugins","components","a","node","props","target","rel","code","inline","match","exec","String","replace","style","language","PreTag","text","_c","$RefreshReg$"],"sources":["D:/FE/AI/ai-chat-app/src/components/MainContent.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport remarkGfm from \"remark-gfm\";\r\nimport rehypeRaw from \"rehype-raw\";\r\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\r\nimport { oneDark } from \"react-syntax-highlighter/dist/esm/styles/prism\";\r\n\r\nimport \"./MainContent.css\";\r\n\r\nconst COHERE_API_KEY = process.env.REACT_APP_COHERE_API_KEY; // <-- Đảm bảo dòng này đúng\r\nconst COHERE_CHAT_API_URL = \"https://api.cohere.com/v1/chat\";\r\n\r\nconst MainContent = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  return (\r\n    <main className=\"main-content\">\r\n      {/* ... (Header) ... */}\r\n\r\n      <div className=\"content-body\">\r\n        <div className=\"chat-message-list\">\r\n          {/* ... (no-message-prompt) ... */}\r\n          {messages.map((msg, index) => (\r\n            <div key={index} className={`message-wrapper ${msg.sender}`}>\r\n              {msg.sender === \"ai\" && <div className=\"message-avatar ai-avatar\">AI</div>}\r\n\r\n              <div className={`message-bubble ${msg.sender}`}>\r\n                {/* --------------------------------------------------- */}\r\n                {/* ĐÂY LÀ PHẦN QUAN TRỌNG NHẤT */}\r\n                {/* Đảm bảo KHÔNG có logic if/else dựa trên msg.type ở đây */}\r\n                {/* Mà CHỈ DÙNG ReactMarkdown cho tất cả các tin nhắn AI */}\r\n                {/* --------------------------------------------------- */}\r\n                <ReactMarkdown\r\n                  remarkPlugins={[remarkGfm]}\r\n                  rehypePlugins={[rehypeRaw]}\r\n                  components={{\r\n                    a: ({ node, ...props }) => (\r\n                      <a target=\"_blank\" rel=\"noopener noreferrer\" {...props} />\r\n                    ),\r\n                    code({ node, inline, className, children, ...props }) {\r\n                      const match = /language-(\\w+)/.exec(className || \"\");\r\n                      return !inline && match ? (\r\n                        <SyntaxHighlighter\r\n                          children={String(children).replace(/\\n$/, \"\")}\r\n                          style={oneDark}\r\n                          language={match[1]}\r\n                          PreTag=\"div\"\r\n                          {...props}\r\n                        />\r\n                      ) : (\r\n                        <code className={className} {...props}>\r\n                          {children}\r\n                        </code>\r\n                      );\r\n                    },\r\n                  }}\r\n                >\r\n                  {msg.text} {/* Vẫn là msg.text */}\r\n                </ReactMarkdown>\r\n              </div>\r\n\r\n              {msg.sender === \"user\" && (\r\n                <div className=\"message-avatar user-avatar\">Bạn</div>\r\n              )}\r\n            </div>\r\n          ))}\r\n          {/* ... (isLoading và messagesEndRef) ... */}\r\n        </div>\r\n      </div>\r\n\r\n      {/* ... (chat-input-area) ... */}\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default MainContent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}