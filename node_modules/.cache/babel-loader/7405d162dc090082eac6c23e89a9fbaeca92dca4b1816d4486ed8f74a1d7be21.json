{"ast":null,"code":"var _jsxFileName = \"D:\\\\FE\\\\AI\\\\ai-chat-app\\\\src\\\\components\\\\MainContent.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport rehypeRaw from \"rehype-raw\";\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\nimport { oneDark } from \"react-syntax-highlighter/dist/esm/styles/prism\";\nimport \"./MainContent.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COHERE_API_KEY = process.env.REACT_APP_COHERE_API_KEY; // <-- Đảm bảo dòng này đúng\nconst COHERE_CHAT_API_URL = \"https://api.cohere.com/v1/chat\";\nconst MainContent = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n  useEffect(() => {\n    setMessages([{\n      sender: \"ai\",\n      type: \"text\",\n      text: \"Chào mừng bạn đến với Gemini! Bạn có thể hỏi tôi bất cứ điều gì về lập trình, thiết kế, hoặc các chủ đề khác.\"\n    }, {\n      sender: \"ai\",\n      type: \"text\",\n      // Type vẫn là text, ReactMarkdown sẽ xử lý markdown trong text\n      text: `Dưới đây là một ví dụ về **Code Block** trong JavaScript:\n\n\\`\\`\\`javascript\nfunction greet(name) {\n  console.log(\\`Hello, \\${name}!\\`);\n}\n\ngreet(\"World\");\n\\`\\`\\`\n\nVà đây là một danh sách:\n* Mục 1\n* Mục 2\n`\n    }]);\n  }, []);\n\n  // ... (handleSendMessage, handleKeyPress giữ nguyên như tôi đã cung cấp bản fix)\n\n  // -------------------------------------------------------------\n  // ĐOẠN NÀY PHẢI ĐƯỢC XÓA HOẶC COMMENT HOÀN TOÀN\n  // // Component con để render Code Block (GIỮ NGUYÊN ĐOẠN NÀY LÀ SAI)\n  // const CodeBlockDisplay = ({ fileName, description, code }) => (\n  //   <div className=\"code-content-wrapper\">\n  //     <div className=\"code-block-header\">\n  //       <span className=\"code-filename\">{fileName}</span>\n  //       <span className=\"code-description\">{description}</span>\n  //       <button className=\"copy-code-button\">📋</button>\n  //       <button className=\"code-menu-button\">⋮</button>\n  //     </div>\n  //     <pre className=\"code-content\">\n  //       <code className=\"language-text\">{code}</code>\n  //     </pre>\n  //   </div>\n  // );\n  // -------------------------------------------------------------\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"main-content\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-body\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-message-list\",\n        children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message-wrapper ${msg.sender}`,\n          children: [msg.sender === \"ai\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-avatar ai-avatar\",\n            children: \"AI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 39\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message-bubble ${msg.sender}`,\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              remarkPlugins: [remarkGfm],\n              rehypePlugins: [rehypeRaw],\n              components: {\n                a: ({\n                  node,\n                  ...props\n                }) => /*#__PURE__*/_jsxDEV(\"a\", {\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  ...props\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 23\n                }, this),\n                code({\n                  node,\n                  inline,\n                  className,\n                  children,\n                  ...props\n                }) {\n                  const match = /language-(\\w+)/.exec(className || \"\");\n                  return !inline && match ? /*#__PURE__*/_jsxDEV(SyntaxHighlighter, {\n                    children: String(children).replace(/\\n$/, \"\"),\n                    style: oneDark,\n                    language: match[1],\n                    PreTag: \"div\",\n                    ...props\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"code\", {\n                    className: className,\n                    ...props,\n                    children: children\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 102,\n                    columnNumber: 25\n                  }, this);\n                }\n              },\n              children: [msg.text, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this), msg.sender === \"user\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-avatar user-avatar\",\n            children: \"B\\u1EA1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(MainContent, \"/J2nDmb0z7+G+jtBkejPLHt5I1g=\");\n_c = MainContent;\nexport default MainContent;\nvar _c;\n$RefreshReg$(_c, \"MainContent\");","map":{"version":3,"names":["React","useState","useRef","useEffect","ReactMarkdown","remarkGfm","rehypeRaw","Prism","SyntaxHighlighter","oneDark","jsxDEV","_jsxDEV","COHERE_API_KEY","process","env","REACT_APP_COHERE_API_KEY","COHERE_CHAT_API_URL","MainContent","_s","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","messagesEndRef","sender","type","text","className","children","map","msg","index","fileName","_jsxFileName","lineNumber","columnNumber","remarkPlugins","rehypePlugins","components","a","node","props","target","rel","code","inline","match","exec","String","replace","style","language","PreTag","_c","$RefreshReg$"],"sources":["D:/FE/AI/ai-chat-app/src/components/MainContent.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport remarkGfm from \"remark-gfm\";\r\nimport rehypeRaw from \"rehype-raw\";\r\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\r\nimport { oneDark } from \"react-syntax-highlighter/dist/esm/styles/prism\";\r\n\r\nimport \"./MainContent.css\";\r\n\r\nconst COHERE_API_KEY = process.env.REACT_APP_COHERE_API_KEY; // <-- Đảm bảo dòng này đúng\r\nconst COHERE_CHAT_API_URL = \"https://api.cohere.com/v1/chat\";\r\n\r\nconst MainContent = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    setMessages([\r\n      {\r\n        sender: \"ai\",\r\n        type: \"text\",\r\n        text: \"Chào mừng bạn đến với Gemini! Bạn có thể hỏi tôi bất cứ điều gì về lập trình, thiết kế, hoặc các chủ đề khác.\",\r\n      },\r\n      {\r\n        sender: \"ai\",\r\n        type: \"text\", // Type vẫn là text, ReactMarkdown sẽ xử lý markdown trong text\r\n        text: `Dưới đây là một ví dụ về **Code Block** trong JavaScript:\r\n\r\n\\`\\`\\`javascript\r\nfunction greet(name) {\r\n  console.log(\\`Hello, \\${name}!\\`);\r\n}\r\n\r\ngreet(\"World\");\r\n\\`\\`\\`\r\n\r\nVà đây là một danh sách:\r\n* Mục 1\r\n* Mục 2\r\n`,\r\n      },\r\n    ]);\r\n  }, []);\r\n\r\n  // ... (handleSendMessage, handleKeyPress giữ nguyên như tôi đã cung cấp bản fix)\r\n\r\n  // -------------------------------------------------------------\r\n  // ĐOẠN NÀY PHẢI ĐƯỢC XÓA HOẶC COMMENT HOÀN TOÀN\r\n  // // Component con để render Code Block (GIỮ NGUYÊN ĐOẠN NÀY LÀ SAI)\r\n  // const CodeBlockDisplay = ({ fileName, description, code }) => (\r\n  //   <div className=\"code-content-wrapper\">\r\n  //     <div className=\"code-block-header\">\r\n  //       <span className=\"code-filename\">{fileName}</span>\r\n  //       <span className=\"code-description\">{description}</span>\r\n  //       <button className=\"copy-code-button\">📋</button>\r\n  //       <button className=\"code-menu-button\">⋮</button>\r\n  //     </div>\r\n  //     <pre className=\"code-content\">\r\n  //       <code className=\"language-text\">{code}</code>\r\n  //     </pre>\r\n  //   </div>\r\n  // );\r\n  // -------------------------------------------------------------\r\n\r\n  return (\r\n    <main className=\"main-content\">\r\n      {/* ... (Header) ... */}\r\n\r\n      <div className=\"content-body\">\r\n        <div className=\"chat-message-list\">\r\n          {/* ... (no-message-prompt) ... */}\r\n          {messages.map((msg, index) => (\r\n            <div key={index} className={`message-wrapper ${msg.sender}`}>\r\n              {msg.sender === \"ai\" && <div className=\"message-avatar ai-avatar\">AI</div>}\r\n\r\n              <div className={`message-bubble ${msg.sender}`}>\r\n                {/* --------------------------------------------------- */}\r\n                {/* ĐÂY LÀ PHẦN QUAN TRỌNG NHẤT */}\r\n                {/* Đảm bảo KHÔNG có logic if/else dựa trên msg.type ở đây */}\r\n                {/* Mà CHỈ DÙNG ReactMarkdown cho tất cả các tin nhắn AI */}\r\n                {/* --------------------------------------------------- */}\r\n                <ReactMarkdown\r\n                  remarkPlugins={[remarkGfm]}\r\n                  rehypePlugins={[rehypeRaw]}\r\n                  components={{\r\n                    a: ({ node, ...props }) => (\r\n                      <a target=\"_blank\" rel=\"noopener noreferrer\" {...props} />\r\n                    ),\r\n                    code({ node, inline, className, children, ...props }) {\r\n                      const match = /language-(\\w+)/.exec(className || \"\");\r\n                      return !inline && match ? (\r\n                        <SyntaxHighlighter\r\n                          children={String(children).replace(/\\n$/, \"\")}\r\n                          style={oneDark}\r\n                          language={match[1]}\r\n                          PreTag=\"div\"\r\n                          {...props}\r\n                        />\r\n                      ) : (\r\n                        <code className={className} {...props}>\r\n                          {children}\r\n                        </code>\r\n                      );\r\n                    },\r\n                  }}\r\n                >\r\n                  {msg.text} {/* Vẫn là msg.text */}\r\n                </ReactMarkdown>\r\n              </div>\r\n\r\n              {msg.sender === \"user\" && (\r\n                <div className=\"message-avatar user-avatar\">Bạn</div>\r\n              )}\r\n            </div>\r\n          ))}\r\n          {/* ... (isLoading và messagesEndRef) ... */}\r\n        </div>\r\n      </div>\r\n\r\n      {/* ... (chat-input-area) ... */}\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default MainContent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}